# ============================================================
# Database Configuration (PostgreSQL with Prisma)
# ============================================================

# Required: PostgreSQL connection URL
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE
# Note: Port 5434 is used to avoid conflicts (see docker-compose.yml)
DATABASE_URL=postgresql://postgres:password@localhost:5434/charttalk

# ============================================================
# JWT Authentication (Laravel User Service Integration)
# ============================================================
# See .docs/jwt-authentication.md for full documentation

# Required: Path to RSA public key (for JWT validation)
# The Laravel backend signs tokens with private key, we validate with public key
JWT_PUBLIC_KEY_PATH=./keys/jwt-public.pem

# Alternative: Inline RSA public key (use \n for newlines)
# JWT_PUBLIC_KEY="-----BEGIN PUBLIC KEY-----\nMIIBIjAN...your-key-here...\n-----END PUBLIC KEY-----"

# Optional: JWT algorithm (default: RS256)
# JWT_ALGORITHM=RS256

# Required: Expected JWT issuer - must match Laravel User Service config
# This validates the 'iss' claim in the JWT token
JWT_ISSUER=laravel-user-service

# Optional: Development bypass (skip JWT validation in dev mode)
# When enabled, all requests get a test user with 'pro' plan and 'active' subscription
# AUTH_DEV_BYPASS=true

# ============================================================
# Chart-img.com API Configuration
# ============================================================
# Get your API key from https://chart-img.com/dashboard

# Required: Your chart-img.com API key
CHART_IMG_API_KEY=your_api_key_here

# Optional: Plan level (determines rate limits)
# Options: BASIC, PRO, MEGA, ULTRA, ENTERPRISE
# Default: PRO
CHART_IMG_PLAN=PRO

# Optional: Custom rate limits (override plan defaults)
# CHART_IMG_RPS=10
# CHART_IMG_DAILY_LIMIT=500

# Optional: Next.js server port (for REST API endpoints)
# Default: 3000
PORT=3010

# Optional: Logging level
# Options: debug, info, warn, error
# Default: info
LOG_LEVEL=info


# ============================================================
# OpenAI API Configuration (for AI chart analysis)
# ============================================================

# Required: Your OpenAI API key
# Get your API key from https://platform.openai.com/api-keys
OPENAI_API_KEY=your_openai_api_key_here

# Optional: Default model for chart analysis
# Options: gpt-4o, gpt-4o-mini, gpt-4-turbo
# Default: gpt-4o-mini (recommended for cost-effective analysis)
ANALYSIS_DEFAULT_MODEL=gpt-4o-mini

# Optional: Maximum tokens for analysis response
# Default: 2000
# ANALYSIS_MAX_TOKENS=2000

# Optional: Temperature for AI response (0.0-1.0)
# Higher = more creative, Lower = more deterministic
# Default: 0.7
# ANALYSIS_TEMPERATURE=0.7

# Optional: Request timeout in milliseconds
# Default: 60000 (60 seconds)
# ANALYSIS_TIMEOUT=60000

# Optional: Maximum retry attempts for failed requests
# Default: 3
# ANALYSIS_MAX_RETRIES=3


# ============================================================
# AWS S3 Configuration (for permanent chart storage)
# ============================================================

# Required: AWS credentials
AWS_ACCESS_KEY_ID=your_aws_access_key_here
AWS_SECRET_ACCESS_KEY=your_aws_secret_access_key_here

# Required: S3 bucket configuration
AWS_REGION=us-east-1
AWS_S3_BUCKET=your-bucket-name-here
AWS_S3_BUCKET_REGION=us-east-1

# Optional: CloudFront CDN domain (for faster chart delivery)
# AWS_CLOUDFRONT_DOMAIN=d123abc.cloudfront.net

# Optional: S3 storage class
# Options: STANDARD, INTELLIGENT_TIERING, GLACIER
# Default: STANDARD
# AWS_S3_STORAGE_CLASS=STANDARD

# Optional: Default TTL for charts (in days)
# Used for S3 lifecycle policies to auto-delete old charts
# Default: 0 (permanent storage, no expiration)
# AWS_S3_DEFAULT_TTL_DAYS=30
